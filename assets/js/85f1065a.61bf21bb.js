"use strict";(self.webpackChunklmos_website=self.webpackChunklmos_website||[]).push([[4305],{3350:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"arc/adl/adl_technical","title":"Technical Details","description":"The goal of the Agent Definition Language (ADL) is to provide a reliable and efficient way","source":"@site/docs/arc/adl/adl_technical.md","sourceDirName":"arc/adl","slug":"/arc/adl/adl_technical","permalink":"/lmos/docs/arc/adl/adl_technical","draft":false,"unlisted":false,"editUrl":"https://github.com/eclipse-lmos/website/edit/source/docs/arc/adl/adl_technical.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"arcSidebar","previous":{"title":"Learn ARC ADL in 15 Minutes","permalink":"/lmos/docs/arc/adl/adl_learn"},"next":{"title":"ADL cheat sheet","permalink":"/lmos/docs/arc/adl/adl_cheat"}}');var o=s(4848),i=s(8453);const a={sidebar_position:2},r="Technical Details",l={},d=[{value:"How it works",id:"how-it-works",level:2},{value:"Breakdown of the Format",id:"breakdown-of-the-format",level:2},{value:"Overall Guidelines",id:"overall-guidelines",level:3},{value:"Conditionals",id:"conditionals",level:3},{value:"Multiple Conditionals",id:"multiple-conditionals",level:4},{value:"Negative Conditionals",id:"negative-conditionals",level:4},{value:"Regex Conditionals",id:"regex-conditionals",level:4},{value:"Comments",id:"comments",level:3},{value:"Tool calls",id:"tool-calls",level:3},{value:"Static Responses (WIP)",id:"static-responses-wip",level:3},{value:"Use Cases References",id:"use-cases-references",level:3},{value:"Flow Options (WIP)",id:"flow-options-wip",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"technical-details",children:"Technical Details"})}),"\n",(0,o.jsx)(n.p,{children:"The goal of the Agent Definition Language (ADL) is to provide a reliable and efficient way\nto define and manage the behavior of an agent that is accessible to anyone, regardless of their technical background."}),"\n",(0,o.jsx)(n.p,{children:"Traditional prompting has grown into a discipline of its own, with many best practices and techniques.\nThis makes it both difficult and time-consuming to define and manage complex Agent behaviors."}),"\n",(0,o.jsx)(n.p,{children:"Furthermore, with each new model release, modifications to the prompts may be required."}),"\n",(0,o.jsx)(n.p,{children:"The ADL aims to simplify this process by providing a structured format backed by a set of rules and conventions."}),"\n",(0,o.jsx)(n.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,o.jsx)(n.p,{children:"The core idea of the ADL is to separate the definition of an agent's behavior from the actual prompting that is\nsent to the Large Language Model (LLM)."}),"\n",(0,o.jsx)(n.p,{children:'For this to work there is a ADL compiler that "complies" the ADL into a system prompt and other artifacts, such as tools,\nthat is then sent to the LLM.'}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Diagram of ADL",src:s(8892).A+"",width:"1780",height:"822"})}),"\n",(0,o.jsx)(n.h2,{id:"breakdown-of-the-format",children:"Breakdown of the Format"}),"\n",(0,o.jsx)(n.p,{children:"The ADL structures the behavior of an agent into a set of use cases. Each use case defining how the agent should\nrespond to a specific scenario or query."}),"\n",(0,o.jsx)(n.p,{children:"The use case format typically consists of the following components:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"UseCase Name"}),": A concise, descriptive id that uniquely identifies the use case.\nShould be in lowercase and use underscores to separate words."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Description"}),": A detailed explanation of the customer's situation or query."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Steps"})," (optional): A sequence of steps for the Agent to perform before providing the final solution.\nThis section is optional and can be used to provide additional context or guidance."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Solution"}),": The recommended solution to resolve the issue or fulfill the customer's request."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Alternative Solution"})," (optional): An alternative solution that the Agent should try if the primary solution is not effective."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Fallback Solution"})," (optional): The fallback solution that the Agent should use if the primary and alternative solutions fail.\nThe fallback solution is to prevent the Agent from getting stuck in a loop\nwhere it provides the same solution over and over again. It is triggered after X number of failed attempts,\nX being a configurable parameter."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Examples"})," (optional): A list of example queries or statements that should trigger this use case.\nThis section is optional and can be used to provide additional context or guidance."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Steps\n- Ask the customer for their registered email address.\n- Send a password reset link to the provided email address.\n\n#### Solution\nGuide the customer through the password reset process defined on the webpage https://www.example.com/reset-password.\n\n#### Fallback Solution\nIf the customer cannot access their email, escalate the issue to a higher tier of support.\n\n#### Examples\n - I forgot my password.\n"})}),"\n",(0,o.jsxs)(n.p,{children:["If the Agent has access to tools, such as ",(0,o.jsx)(n.code,{children:"send_password_reset_link"}),", these would be called as part of this use case."]}),"\n",(0,o.jsx)(n.h3,{id:"overall-guidelines",children:"Overall Guidelines"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:'Use consistent terms and language throughout the use case to ensure clarity and avoid confusion.\nFor example, if you refer to the user as "customer" in one section, use "customer" throughout the document.\n(Prefer "customer" over "user" as it is more specific and helps maintain a customer-centric focus.)'}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Providing examples when necessary. Examples are a very powerful construct\nand should only be used if the Agent struggles to understand the use case."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"conditionals",children:"Conditionals"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Conditionals"})," is a feature that enables us to omit lines from the use cases based on certain conditions.\n",(0,o.jsx)(n.code,{children:"Conditionals"})," are defined in brackets, for example, ",(0,o.jsx)(n.code,{children:"<condition1, condition2>"}),".\nEach line containing such a ",(0,o.jsx)(n.code,{children:"conditional"})," is filtered out before being provided to the LLM unless all conditions\nare met. ",(0,o.jsx)(n.code,{children:"Conditionals"})," can be placed anywhere within the line."]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Solution\n<isBusinessCustomer>Provide the webpage https://www.example.com/business/reset-password.\nProvide the webpage https://www.example.com/reset-password.<isPrivateCustomer>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The conditions are defined outside of the use cases. Depending on the implementation, how conditionals are provided can vary.\nWhen using the ",(0,o.jsx)(n.code,{children:"useCases"})," function in ARC agent the conditionals are provided as a parameter."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kts",children:' useCases("use_cases.md", conditions = setOf("isBusinessCustomer"))\n'})}),"\n",(0,o.jsx)(n.p,{children:"This would produce the following output that would be feed to the Agent:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Solution\nProvide the webpage https://www.example.com/business/reset-password.\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Important"})," ",(0,o.jsx)(n.code,{children:"Conditionals"})," are only supported in the body of ",(0,o.jsx)(n.code,{children:"Steps"}),", ",(0,o.jsx)(n.code,{children:"Solution"}),",\n",(0,o.jsx)(n.code,{children:"Alternative Solution"})," and ",(0,o.jsx)(n.code,{children:"Fallback Solution"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["As mentioned, conditionals are applied to a single line.\nIf a conditional should span multiple line, the ",(0,o.jsx)(n.code,{children:"</>"})," tag can be used to denote the end of a conditional."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Solution\n<isBusinessCustomer> \n Some solution for business customers.\n Some more solutions for business customers.\n</>\n\n<isPrivateCustomer> \n Some solution for private customers.\n Some more solutions for private customers.\n</>\n"})}),"\n",(0,o.jsx)(n.h4,{id:"multiple-conditionals",children:"Multiple Conditionals"}),"\n",(0,o.jsx)(n.p,{children:"Multiple conditionals can be defined for each line. In this case, all conditionals must be true for the line to be submitted to the LLM."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Solution\n<isBusinessCustomer, isBeta> Some solution for business customers.\n\n"})}),"\n",(0,o.jsx)(n.p,{children:"In this case, the line is only supplied to the LLM when the conditionals\nisBusinessCustomer and isBeta is set."}),"\n",(0,o.jsx)(n.h4,{id:"negative-conditionals",children:"Negative Conditionals"}),"\n",(0,o.jsx)(n.p,{children:'Any conditional can be negated by adding a "!".'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Solution\n<!isBusinessCustomer> Provide this line if the conditional is not set.\n\n"})}),"\n",(0,o.jsxs)(n.p,{children:["In this case, the line is only filtered when the ",(0,o.jsx)(n.code,{children:"isBusinessCustomer"})," is set."]}),"\n",(0,o.jsx)(n.h4,{id:"regex-conditionals",children:"Regex Conditionals"}),"\n",(0,o.jsx)(n.p,{children:'Conditionals can also contain regex expressions that are matched against the input.\nRegex conditionals are "true" when the input from the user matches the regex provided in the conditional.'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Solution\n<regex:.*business.*> Provide this line if the conditional is not set.\n\n"})}),"\n",(0,o.jsx)(n.p,{children:'In this case, the line is only submitted to the LLM when the input contains the phrase "business".'}),"\n",(0,o.jsx)(n.h3,{id:"comments",children:"Comments"}),"\n",(0,o.jsx)(n.p,{children:'Comments can be added to any part of the ADL use cases using "//".'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\n// this is a comment\nCustomer has forgotten their password and needs to reset it.\n\n#### Solution\n// this is a comment.\nProvide the webpage https://www.example.com/reset-password.\n\n"})}),"\n",(0,o.jsx)(n.h3,{id:"tool-calls",children:"Tool calls"}),"\n",(0,o.jsxs)(n.p,{children:["Calls to tools / functions can be denoted using the following syntax ",(0,o.jsx)(n.code,{children:"@my_function()"}),".\nThis is not mandatory, but does provide the following benefits:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Enables the system to dynamically load any required the tools / functions."}),"\n",(0,o.jsx)(n.li,{children:"Enables the system to validate that the required tools / functions are available."}),"\n",(0,o.jsx)(n.li,{children:"Enables the system to re-enforce the execution of the tools."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Solution\nCall the function @password_reset_link() to obtain a password reset link.\nThen provide the customer with the link and guide them through the password reset process.\n\n"})}),"\n",(0,o.jsxs)(n.p,{children:['To re-enforce the execution of the tool, simply add "!" to the function call, like so: ',(0,o.jsx)(n.code,{children:"@password_reset_link()!"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"static-responses-wip",children:"Static Responses (WIP)"}),"\n",(0,o.jsx)(n.p,{children:"Sometimes it is desirable to have the LLM respond with static text as supposed to\nreturning a response generated by the LLM."}),"\n",(0,o.jsx)(n.p,{children:"By wrapping the response in double quotes, the system will re-enforce that the enclosed text\nis returned when the use case is triggered."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:'### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Solution\n"This extact string will be the output."\n\n'})}),"\n",(0,o.jsx)(n.h3,{id:"use-cases-references",children:"Use Cases References"}),"\n",(0,o.jsxs)(n.p,{children:["Use Cases can reference other use cases using the following syntax ",(0,o.jsx)(n.code,{children:"#use_case_id"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"This is not mandatory, but does provide the following benefits:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Enables the system to load uses cases that are stored in other location."}),"\n",(0,o.jsx)(n.li,{children:"Enables the system to validate that the referenced use cases are available."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Solution\nCall the function @password_reset_link() to obtain a password reset link.\n\nIf the customer is a business customer, the use case #business_customer_support should be followed.\n\n"})}),"\n",(0,o.jsx)(n.h3,{id:"flow-options-wip",children:"Flow Options (WIP)"}),"\n",(0,o.jsx)(n.p,{children:"Flow Options enables Use Case authors to express decision trees within the Use Case markdown."}),"\n",(0,o.jsx)(n.p,{children:"To achieve this, the Use Case writer can simply add so-called Flow Options to the bottom of any Use Case as follows:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"[option 1] command\n[option 2] command 2\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Option"}),"\tUsed to match the user's input to the command that should be executed."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Command"})," This can be any instruction given to the LLM to perform. Examples include:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Tool calls"}),"\n",(0,o.jsx)(n.li,{children:"A reply to give to the user"}),"\n",(0,o.jsx)(n.li,{children:"A use case reference"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The options should be placed at the bottom of the solution section of a use case."}),"\n",(0,o.jsx)(n.p,{children:"There can be any number of options, i.e. from 1 to N."}),"\n",(0,o.jsx)(n.p,{children:"Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:'#### Use Case: buy_car\nCustomer wants to buy a car Use Case.\n\n#### Description\nThe customer wants to buy a car.\n\n#### Solution\nAsk the customer what type of car they would like to buy.\n\n[bmw] go to the case #buy_bmw\n[other] reply that we don\'t sell that type of car.\n\n#### Case: buy_bmw\nAsk the customer what color would they like.\n\n[color selected] go to the final  case #buy_bmw_with_color\n[other] reply with "ok, we need to know the color "\n\n#### Case: buy_bmw_with_color\nCall the tool @buy_car() to finalize the purchase.\nAnd reply to the customer that we are grateful for their businees.\n\n'})}),"\n",(0,o.jsx)(n.p,{children:"In this flow, we start by asking the customer what type of car they would like to buy."}),"\n",(0,o.jsx)(n.p,{children:'Based on their response, the agent will either return the solution defined\nin the #buy_bmw use case or reply that "We dont sell that type of car. "'}),"\n",(0,o.jsx)(n.p,{children:"If the customer wants to buy a BMW, the agent will then ask what color they would like.\nIf the customer provides a color, the agent will proceed to the final case #buy_bmw_with_color\nwhere it will call the tool @buy_car() to finalize the purchase\nand reply to the customer that we are grateful for their business."}),"\n",(0,o.jsx)(n.p,{children:"By modularizing the flow in this way, the Use Case Compiler can re-enforce that the agent follows the defined flow."}),"\n",(0,o.jsx)(n.p,{children:'This feature also introduces "Cases". These are Use Cases that are only reachable via a Flow Option.\nUnlike regular Use Cases, Cases do not have Examples nor a Description section.'})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8892:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/adl-efd1c48324011c29b575d78b36d72257.png"},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>r});var t=s(6540);const o={},i=t.createContext(o);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);