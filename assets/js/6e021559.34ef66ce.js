"use strict";(self.webpackChunklmos_website=self.webpackChunklmos_website||[]).push([[2706],{9715:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"arc/dsl/Features/rate_limiter","title":"Rate Limiter","description":"The Arc DSL comes with a built-in rate limiter that can be used to limit the number","source":"@site/docs/arc/01-dsl/Features/rate_limiter.md","sourceDirName":"arc/01-dsl/Features","slug":"/arc/dsl/Features/rate_limiter","permalink":"/lmos/docs/arc/dsl/Features/rate_limiter","draft":false,"unlisted":false,"editUrl":"https://github.com/eclipse-lmos/website/edit/source/docs/arc/01-dsl/Features/rate_limiter.md","tags":[],"version":"current","frontMatter":{"title":"Rate Limiter"},"sidebar":"arcSidebar","previous":{"title":"Extensions","permalink":"/lmos/docs/arc/dsl/Features/extensions"},"next":{"title":"Retry","permalink":"/lmos/docs/arc/dsl/Features/retry"}}');var i=n(4848),r=n(8453);const a={title:"Rate Limiter"},l=void 0,c={},o=[{value:"Timeout",id:"timeout",level:3},{value:"Fallback",id:"fallback",level:3},{value:"Events",id:"events",level:3}];function d(e){const t={code:"code",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"The Arc DSL comes with a built-in rate limiter that can be used to limit the number\nof requests an Agent can process in a given time frame."}),"\n",(0,i.jsx)(t.p,{children:"Example, permit 1 request every 10 seconds:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-kts",children:'agent {\n    name = "weather"\n    limit { 1 / 10.seconds }\n    prompt { """ Some system prompt """ }\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:'A common use case is to fall back to a different LLM model during peak times.\nHere the "fallback model" is used when the rate limit is exceeded.'}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-kts",children:'agent {\n    name = "weather"\n    model {\n        limit("model") { 1 / 10.seconds } ?: "fallback model"\n    }\n    prompt { """ Some system prompt """ }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"timeout",children:"Timeout"}),"\n",(0,i.jsx)(t.p,{children:"A timeout can be added to specify the maximum time a request will\nwait before throwing a RateLimitTimeoutException. Default is 30 seconds."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-kts",children:'agent {\n    name = "weather"\n    limit { 1 / 10.seconds withTimeout 30.seconds }\n    prompt { """ Some system prompt """ }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"fallback",children:"Fallback"}),"\n",(0,i.jsx)(t.p,{children:"A fallback can be added to perform a specific action when a RateLimitTimeoutException occurs."}),"\n",(0,i.jsx)(t.p,{children:'The following example will return "try later" when a timeout occurs.'}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-kts",children:'agent {\n    name = "weather"\n    limit { 1 / 10.seconds fallback { breakWith("try later") } }\n    prompt { """ Some system prompt """ }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"events",children:"Events"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Name"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"RateLimitedEvent"}),(0,i.jsx)(t.td,{children:"Published when a request is blocked due to the rate limiter."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"RateLimitTimeoutEvent"}),(0,i.jsx)(t.td,{children:"Published when a request triggers a timeout   exception while being blocked."})]})]})]})]})}function m(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>l});var s=n(6540);const i={},r=s.createContext(i);function a(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);