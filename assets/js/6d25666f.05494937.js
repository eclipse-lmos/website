"use strict";(self.webpackChunklmos_website=self.webpackChunklmos_website||[]).push([[9234],{2021:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>a});var t=n(4848),s=n(8453);const r={title:"WebSocket Sub-Protocol",sidebar_position:4},c="WebSocket Subprotocol",i={id:"lmos_protocol/websocket_binding",title:"WebSocket Sub-Protocol",description:"WebSockets provide a mechanism to upgrade a standard HTTP request into a full-duplex, persistent communication channel over a single TCP connection.",source:"@site/docs/lmos_protocol/websocket_binding.md",sourceDirName:"lmos_protocol",slug:"/lmos_protocol/websocket_binding",permalink:"/lmos/docs/lmos_protocol/websocket_binding",draft:!1,unlisted:!1,editUrl:"https://github.com/eclipse-lmos/website/edit/main/docs/lmos_protocol/websocket_binding.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"WebSocket Sub-Protocol",sidebar_position:4},sidebar:"lmosSidebar",previous:{title:"Security & Privacy",permalink:"/lmos/docs/lmos_protocol/security"},next:{title:"Overview",permalink:"/lmos/docs/architecture/overview"}},l={},a=[{value:"IANA Considerations",id:"iana-considerations",level:2},{value:"WebSocket Protocol Handshake",id:"websocket-protocol-handshake",level:2},{value:"Example HTTP Request",id:"example-http-request",level:4},{value:"Example HTTP Response",id:"example-http-response",level:4}];function d(e){const o={blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.header,{children:(0,t.jsx)(o.h1,{id:"websocket-subprotocol",children:"WebSocket Subprotocol"})}),"\n",(0,t.jsx)(o.p,{children:"WebSockets provide a mechanism to upgrade a standard HTTP request into a full-duplex, persistent communication channel over a single TCP connection.\nThis enables efficient, two-way communication between LMOS agents, tools, and consumers. However, since WebSockets offer a raw TCP socket with no inherent semantics, the LMOS protocol defines a specialized sub-protocol to structure and standardize the communication."}),"\n",(0,t.jsx)(o.h2,{id:"iana-considerations",children:"IANA Considerations"}),"\n",(0,t.jsx)(o.p,{children:'We propose the registration of a subprotocol in the IANA "WebSocket Subprotocol Name Registry". The name of the subprotocol and the published URL of its definition are to be confirmed. Currently, the name "lmosprotocol" and this document are used as a placeholder and draft proposal.'}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"Subprotocol Identifier"}),":",(0,t.jsx)(o.br,{}),"\n",(0,t.jsx)(o.code,{children:"lmosprotocol"})]}),"\n"]}),"\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"Subprotocol Common Name"}),":",(0,t.jsx)(o.br,{}),"\n","LMOS Protocol"]}),"\n"]}),"\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"Subprotocol Definition"}),":",(0,t.jsx)(o.br,{}),"\n","This document"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(o.blockquote,{children:["\n",(0,t.jsxs)(o.p,{children:["EDITOR\u2019S NOTE: Subprotocol name is to be determined.  ",(0,t.jsx)("br",{}),"\nOther names:"]}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"lmos"}),"\n",(0,t.jsx)(o.li,{children:"v1.lmos"}),"\n",(0,t.jsx)(o.li,{children:"lmosprotocol"}),"\n",(0,t.jsx)(o.li,{children:"v1.lmosprotocol"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(o.h2,{id:"websocket-protocol-handshake",children:"WebSocket Protocol Handshake"}),"\n",(0,t.jsxs)(o.p,{children:["To communicate using the LMOS protocol, an LMOS consumer ",(0,t.jsx)(o.strong,{children:"MUST"})," locate one or more communication endpoints provided by an Agent or Tool for a given set of interaction affordances. The specific requirements are as follows:"]}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsxs)(o.p,{children:["The URL of an endpoint to be used for a given interaction ",(0,t.jsx)(o.strong,{children:"MUST"})," be obtained from an Agent or Tool description:"]}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:["After being resolved against a base URL where applicable, the URI scheme [RFC3986] of the value of its ",(0,t.jsx)(o.code,{children:"href"})," member is a valid transport protocol (e.g., ",(0,t.jsx)(o.code,{children:"ws"}),", ",(0,t.jsx)(o.code,{children:"wss"}),", ",(0,t.jsx)(o.code,{children:"http"}),", ",(0,t.jsx)(o.code,{children:"https"}),", or other supported transports)."]}),"\n",(0,t.jsxs)(o.li,{children:["Its ",(0,t.jsx)(o.code,{children:"subprotocol"})," member has a value of ",(0,t.jsx)(o.code,{children:"lmosprotocol"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsxs)(o.p,{children:["To establish a connection over WebSocket with an LMOS-compatible Agent or Tool, an HTTP GET request ",(0,t.jsx)(o.strong,{children:"MUST"})," be upgraded to a WebSocket connection using a standard WebSocket protocol handshake and the ",(0,t.jsx)(o.code,{children:"lmosprotocol"})," subprotocol."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(o.p,{children:"This handshake ensures that communication adheres to LMOS's communication protocol specification."}),"\n",(0,t.jsx)(o.h4,{id:"example-http-request",children:"Example HTTP Request"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-http",children:"GET wss://agentserver.com/agent\nHost: agentserver.com  \nOrigin: https://agentserver.com  \nUpgrade: websocket  \nConnection: Upgrade  \nSec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==  \nSec-WebSocket-Protocol: lmosprotocol  \nSec-WebSocket-Version: 13  \n"})}),"\n",(0,t.jsx)(o.h4,{id:"example-http-response",children:"Example HTTP Response"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-http",children:"HTTP 101 Switching Protocols  \nUpgrade: websocket  \nConnection: Upgrade  \nSec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=  \nSec-WebSocket-Protocol: lmosprotocol  \n"})})]})}function h(e={}){const{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>c,x:()=>i});var t=n(6540);const s={},r=t.createContext(s);function c(e){const o=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(r.Provider,{value:o},e.children)}}}]);