"use strict";(self.webpackChunklmos_website=self.webpackChunklmos_website||[]).push([[4294],{9844:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"arc/mcp","title":"Model Context Protocol (MCP)","description":"From version 0.122.0","source":"@site/docs/arc/24-mcp.md","sourceDirName":"arc","slug":"/arc/mcp","permalink":"/lmos/docs/arc/mcp","draft":false,"unlisted":false,"editUrl":"https://github.com/eclipse-lmos/website/edit/source/docs/arc/24-mcp.md","tags":[],"version":"current","sidebarPosition":24,"frontMatter":{},"sidebar":"arcSidebar","previous":{"title":"Arc Gradle Plugin","permalink":"/lmos/docs/arc/plugin"}}');var s=n(4848),t=n(8453);const i={},l="Model Context Protocol (MCP)",c={},a=[{value:"Consuming MCP Tools",id:"consuming-mcp-tools",level:3},{value:"Arc as a MCP Server",id:"arc-as-a-mcp-server",level:3},{value:"Error Handling with McpToolErrorHandler",id:"error-handling-with-mcptoolerrorhandler",level:3}];function d(e){const r={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"model-context-protocol-mcp",children:"Model Context Protocol (MCP)"})}),"\n",(0,s.jsx)(r.p,{children:"From version 0.122.0"}),"\n",(0,s.jsx)(r.p,{children:"The Model Context Protocol (MCP) is an open protocol that enables the\nintegration of LLM Agents with external tools and data sources."}),"\n",(0,s.jsx)(r.p,{children:"The following shows how the Arc Framework running in Spring Boot can be configured to utilize MCP."}),"\n",(0,s.jsx)(r.p,{children:"The Arc Framework makes use of the MCP in the following ways:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Integrates MPC hosted tools seamlessly into Arc Agents."}),"\n",(0,s.jsx)(r.li,{children:"Enables the pulling of prompts from MCP enabled servers."}),"\n",(0,s.jsx)(r.li,{children:"Exposes Arc Functions as MCP tools."}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"MCP Diagram",src:n(5749).A+"",width:"2604",height:"1322"})}),"\n",(0,s.jsx)(r.h3,{id:"consuming-mcp-tools",children:"Consuming MCP Tools"}),"\n",(0,s.jsxs)(r.p,{children:["Integrating MCP tools into your Arc Agent is as simple as adding the following configuration to your ",(0,s.jsx)(r.code,{children:"application.yml"})," file:"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yaml",children:"  mcp:\n    tools:\n      urls: [MCP_TOOL_SERVER]\n"})}),"\n",(0,s.jsxs)(r.p,{children:["One or more MCP tool servers can be specified in the ",(0,s.jsx)(r.code,{children:"urls"})," list."]}),"\n",(0,s.jsx)(r.p,{children:"After that tools can be referenced in Agents the same as if they were local tools."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-kts",children:'agent {\n    name = "weather"\n    description = "Agent that provides weather data."\n    prompt { """ Some system prompt """ }\n    tools {\n        +"get_weather"\n        +"get_time"\n    }\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"arc-as-a-mcp-server",children:"Arc as a MCP Server"}),"\n",(0,s.jsx)(r.p,{children:"Arc can also function as a MCP server, exposing its tools to other agents.\nA pre-requisite for this is that Arc is running in Spring Boot server\nand the Arc Spring Boot Starter is included in the project."}),"\n",(0,s.jsxs)(r.p,{children:["Once that is set up, simply enable the feature by adding the following configuration to your ",(0,s.jsx)(r.code,{children:"application.yml"})," file:"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yaml",children:"arc:\n  mcp:\n    tools:\n      expose: true\n"})}),"\n",(0,s.jsx)(r.p,{children:"and add the Spring Boot MCP library to your project:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-kts",children:'implementation("org.springframework.ai:spring-ai-mcp-server-webmvc-spring-boot-starter:1.0.0-M6")\n'})}),"\n",(0,s.jsxs)(r.p,{children:["See ",(0,s.jsx)(r.a,{href:"https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-starter-docs.html#_webflux_server_configuration",children:"https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-starter-docs.html#_webflux_server_configuration"}),"\nfor some configuration options."]}),"\n",(0,s.jsx)(r.h3,{id:"error-handling-with-mcptoolerrorhandler",children:"Error Handling with McpToolErrorHandler"}),"\n",(0,s.jsx)(r.p,{children:"Starting from version 0.122.0, the MCP configuration supports integration of a custom error handler for tool calls."}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"McpToolErrorHandler"})," interface allows you to handle errors that occur during a tool call and return custom error messages."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Example integration:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-kotlin",children:'@Bean\nfun myErrorHandler(): McpToolErrorHandler = object : McpToolErrorHandler {\n    override fun handleToolError(toolName: String, error: Exception): McpSchema.CallToolResult? {\n        // Custom error handling, e.g. logging or specific error message\n        return McpSchema.CallToolResult("Error in tool $toolName: ${error.message}", true)\n    }\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:["When an error occurs during a tool call, the system first checks if an error handler is present.#\nIf so, its ",(0,s.jsx)(r.code,{children:"handleToolError"})," method is called. If it returns ",(0,s.jsx)(r.code,{children:"null"}),", the default error handling is used."]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},5749:(e,r,n)=>{n.d(r,{A:()=>o});const o=n.p+"assets/images/mcp-c807d4443de6ae92e412aedcdfbe9c7b.png"},8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>l});var o=n(6540);const s={},t=o.createContext(s);function i(e){const r=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(t.Provider,{value:r},e.children)}}}]);