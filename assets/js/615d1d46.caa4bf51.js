"use strict";(self.webpackChunklmos_website=self.webpackChunklmos_website||[]).push([[5990],{3401:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>r,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"arc/dsl/defining_functions","title":"Defining Functions","description":"Functions are an important building block of Agents. They are used to access external services and data.","source":"@site/docs/arc/01-dsl/defining_functions.md","sourceDirName":"arc/01-dsl","slug":"/arc/dsl/defining_functions","permalink":"/lmos/docs/arc/dsl/defining_functions","draft":false,"unlisted":false,"editUrl":"https://github.com/eclipse-lmos/website/edit/source/docs/arc/01-dsl/defining_functions.md","tags":[],"version":"current","frontMatter":{"title":"Defining Functions"},"sidebar":"arcSidebar","previous":{"title":"Handling Data","permalink":"/lmos/docs/arc/dsl/data"},"next":{"title":"Extensions","permalink":"/lmos/docs/arc/dsl/extensions"}}');var i=t(4848),a=t(8453);const o={title:"Defining Functions"},c=void 0,r={},l=[{value:"Assigning Functions conditionally",id:"assigning-functions-conditionally",level:3},{value:"Automatic assign all available functions",id:"automatic-assign-all-available-functions",level:3}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h3:"h3",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",...(0,a.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"Functions are an important building block of Agents. They are used to access external services and data.\nAn Agent can be assigned multiple functions.\nAgents choose which functions to use based on the function description."}),"\n",(0,i.jsxs)(e.p,{children:["Under the hood, these functions translate to LLM Functions, for example,\nOpenAI functions (",(0,i.jsx)(e.a,{href:"https://platform.openai.com/docs/guides/function-calling",children:"https://platform.openai.com/docs/guides/function-calling"}),")."]}),"\n",(0,i.jsxs)(e.admonition,{type:"info",children:[(0,i.jsx)(e.mdxAdmonitionTitle,{}),(0,i.jsx)(e.p,{children:"Not all Models/Clients support functions."})]}),"\n",(0,i.jsxs)(e.p,{children:["Here is an example of a Weather Agent assigned a ",(0,i.jsx)(e.code,{children:"get_weather"})," function and ",(0,i.jsx)(e.code,{children:"get_time"})," function."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kts",children:'agent {\n    name = "weather"\n    description = "Agent that provides weather data."\n    prompt { """ Some system prompt """ }\n    tools {\n        +"get_weather"\n        +"get_time"\n    }\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["Example ",(0,i.jsx)(e.code,{children:"weather.functions.kts"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kts",children:'function(\n  name = "get_weather",\n  description = "Returns real-time weather information for any location",\n  params = types(string("location", "a city to obtain the weather for."))\n) { (location) ->\n    """\n        The weather is good in $location. It is 20 degrees celsius.\n    """\n  }\n\n'})}),"\n",(0,i.jsx)(e.p,{children:"Functions always return a string. This string can contain natural language text, JSON, or any other format\nor a combination of them."}),"\n",(0,i.jsxs)(e.p,{children:["Complex parameters, such as arrays or objects, can also be defined using the ",(0,i.jsx)(e.code,{children:"types"})," function."]}),"\n",(0,i.jsx)(e.p,{children:"For example, an array of numbers can be defined as follows:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kts",children:'function(\n    name = "add_numbers",\n    description = "Returns the sum of 2 numbers.",\n    params = types(array("numbers", "The numbers to add.", itemType = "number"))\n) { (numbers) ->\n    val toAdd = numbers as List<Int> \n    val sum = toAdd.sumOf { it }\n    "The sum of the numbers is $sum"\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"assigning-functions-conditionally",children:"Assigning Functions conditionally"}),"\n",(0,i.jsxs)(e.p,{children:["Functions can be assigned conditionally based on the Agent's state or the user's input.\nWithin the ",(0,i.jsx)(e.code,{children:"tools"})," block, you can use the ",(0,i.jsx)(e.code,{children:"get"})," function\nto access the current request or any other bean contained within the context of the Agent."]}),"\n",(0,i.jsx)(e.p,{children:"Here is an example:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kts",children:'agent {\n    name = "weather"\n    description = "Agent that provides weather data."\n    prompt { """ Some system prompt """ }\n    tools {\n        val isBeta = get<SomeCustomBean>().isBeta()\n        if(isBeta) +"get_weather_forecast"\n        +"get_weather"\n        +"get_time"\n    }\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["(",(0,i.jsx)(e.code,{children:"SomeCustomBean"})," is a custom bean, not provided by the framework)"]}),"\n",(0,i.jsx)(e.h3,{id:"automatic-assign-all-available-functions",children:"Automatic assign all available functions"}),"\n",(0,i.jsxs)(e.p,{children:["If you want to assign all available functions to an Agent, you can use the ",(0,i.jsx)(e.code,{children:"AllTools"})," constant."]}),"\n",(0,i.jsx)(e.p,{children:"Example:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kts",children:'agent {\n    name = "weather"\n    description = "Agent that provides weather data."\n    prompt { """ Some system prompt """ }\n    tools = AllTools\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"This will supply all functions that are available in the application to the Agent."})]})}function u(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>c});var s=t(6540);const i={},a=s.createContext(i);function o(n){const e=s.useContext(a);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),s.createElement(a.Provider,{value:e},n.children)}}}]);