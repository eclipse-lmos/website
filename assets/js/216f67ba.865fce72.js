"use strict";(self.webpackChunklmos_website=self.webpackChunklmos_website||[]).push([[7486],{6958:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"arc/adl","title":"Agent Definition Language (ADL)","description":"The goal of the Agent Definition Language (ADL) is to provide a reliable and efficient way","source":"@site/docs/arc/01-adl.md","sourceDirName":"arc","slug":"/arc/adl","permalink":"/lmos/docs/arc/adl","draft":false,"unlisted":false,"editUrl":"https://github.com/eclipse-lmos/website/edit/source/docs/arc/01-adl.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"arcSidebar","previous":{"title":"Filtering Input/Output","permalink":"/lmos/docs/arc/dsl/filters"},"next":{"title":"Quickstart","permalink":"/lmos/docs/arc/quickstart"}}');var o=s(4848),i=s(8453);const r={sidebar_position:2},a="Agent Definition Language (ADL)",l={},d=[{value:"How it works",id:"how-it-works",level:2},{value:"Breakdown of the Format",id:"breakdown-of-the-format",level:2},{value:"Guidelines",id:"guidelines",level:3},{value:"Conditionals",id:"conditionals",level:3},{value:"Adding the Use Case to an Agent",id:"adding-the-use-case-to-an-agent",level:3}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"agent-definition-language-adl",children:"Agent Definition Language (ADL)"})}),"\n",(0,o.jsx)(n.p,{children:"The goal of the Agent Definition Language (ADL) is to provide a reliable and efficient way\nto define and manage the behavior of an agent that is accessible to anyone, regardless of their technical background."}),"\n",(0,o.jsx)(n.p,{children:"Traditional prompting has grown into a discipline of its own, with many best practices and techniques.\nThis makes it both difficult and time-consuming to define and manage complex Agent behaviors."}),"\n",(0,o.jsx)(n.p,{children:"Furthermore, with each new model release, modifications to the prompts may be required."}),"\n",(0,o.jsx)(n.p,{children:"The ADL aims to simplify this process by providing a structured format backed by a set of rules and conventions."}),"\n",(0,o.jsx)(n.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,o.jsx)(n.p,{children:"The core idea of the ADL is to separate the definition of an agent's behavior from the actual prompting that is\nsent to the Large Language Model (LLM)."}),"\n",(0,o.jsx)(n.p,{children:'For this to work there is a ADL compiler that "complies" the ADL into a system prompt and other artifacts, such as tools,\nthat is then sent to the LLM.'}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Diagram of ADL",src:s(8892).A+"",width:"1780",height:"822"})}),"\n",(0,o.jsx)(n.h2,{id:"breakdown-of-the-format",children:"Breakdown of the Format"}),"\n",(0,o.jsx)(n.p,{children:"The ADL structures the behavior of an agent into a set of use cases. Each use case defining how the agent should\nrespond to a specific scenario or query."}),"\n",(0,o.jsx)(n.p,{children:"The use case format typically consists of the following components:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"UseCase Name"}),": A concise, descriptive id that uniquely identifies the use case.\nShould be in lowercase and use underscores to separate words."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Description"}),": A detailed explanation of the customer's situation or query."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Steps"})," (optional): A sequence of steps for the Agent to perform before providing the final solution.\nThis section is optional and can be used to provide additional context or guidance."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Solution"}),": The recommended solution to resolve the issue or fulfill the customer's request."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Alternative Solution"})," (optional): An alternative solution that the Agent should try if the primary solution is not effective."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Fallback Solution"})," (optional): The fallback solution that the Agent should use if the primary and alternative solutions fail.\nThe fallback solution is to prevent the Agent from getting stuck in a loop\nwhere it provides the same solution over and over again. It is triggered after X number of failed attempts,\nX being a configurable parameter."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Examples"})," (optional): A list of example queries or statements that should trigger this use case.\nThis section is optional and can be used to provide additional context or guidance."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Steps\n- Ask the customer for their registered email address.\n- Send a password reset link to the provided email address.\n\n#### Solution\nGuide the customer through the password reset process defined on the webpage https://www.example.com/reset-password.\n\n#### Fallback Solution\nIf the customer cannot access their email, escalate the issue to a higher tier of support.\n\n#### Examples\n - I forgot my password.\n"})}),"\n",(0,o.jsxs)(n.p,{children:["If the Agent has access to tools, such as ",(0,o.jsx)(n.code,{children:"send_password_reset_link"}),", these would be called as part of this use case."]}),"\n",(0,o.jsx)(n.h3,{id:"guidelines",children:"Guidelines"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:'Use consistent terms and language throughout the use case to ensure clarity and avoid confusion.\nFor example, if you refer to the user as "customer" in one section, use "customer" throughout the document.\n(Prefer "customer" over "user" as it is more specific and helps maintain a customer-centric focus.)'}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Providing examples when necessary. Examples are a very powerful construct\nand should only be used if the Agent struggles to understand the use case."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"conditionals",children:"Conditionals"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Conditionals"})," is a feature that enables us to omit lines from the use cases based on certain conditions.\n",(0,o.jsx)(n.code,{children:"Conditionals"})," are defined in brackets, for example, ",(0,o.jsx)(n.code,{children:"<condition1, condition2>"}),".\nEach line containing such a ",(0,o.jsx)(n.code,{children:"conditional"})," is filtered out before being provided to the Agent unless all conditions\nare met. ",(0,o.jsx)(n.code,{children:"Conditionals"})," can be placed anywhere within the line."]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Solution\n<isBusinessCustomer>Provide the webpage https://www.example.com/business/reset-password.\nProvide the webpage https://www.example.com/reset-password.<isPrivateCustomer>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The conditions are passed to the ",(0,o.jsx)(n.code,{children:"useCases"})," function as a set of strings."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kts",children:' useCases("use_cases.md", conditions = setOf("isBusinessCustomer"))\n'})}),"\n",(0,o.jsx)(n.p,{children:"This would produce the following output that would be feed to the Agent:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"### UseCase: password_reset\n#### Description\nCustomer has forgotten their password and needs to reset it.\n\n#### Solution\nProvide the webpage https://www.example.com/business/reset-password.\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Important"})," ",(0,o.jsx)(n.code,{children:"Conditionals"})," are only supported in the body of ",(0,o.jsx)(n.code,{children:"Steps"}),", ",(0,o.jsx)(n.code,{children:"Solution"}),",\n",(0,o.jsx)(n.code,{children:"Alternative Solution"})," and ",(0,o.jsx)(n.code,{children:"Fallback Solution"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"adding-the-use-case-to-an-agent",children:"Adding the Use Case to an Agent"}),"\n",(0,o.jsx)(n.p,{children:"To best utilize the use case format in an ARC Agent, the following steps are recommended:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Add ",(0,o.jsx)(n.code,{children:"UseCaseResponseHandler"})," to the ",(0,o.jsx)(n.code,{children:"filterOutput"})," section of the Agent DSL. This will enable the Agent to\ntrack what solutions have been provided to the user and trigger the fallback solution if necessary."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Add instructions to the Agent's prompt that guide the Agent on how to handle the use cases.\nThe example below has a good balance between guiding the Agent, but allowing the Agent to\nsolve problems not listed as a use case."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Include the use cases in the prompt by calling the ",(0,o.jsx)(n.code,{children:"useCases"})," function.\nThis function reads the use cases from a markdown file and formats them for display in the prompt.\nThe ",(0,o.jsx)(n.code,{children:"fallbackLimit"})," parameter specifies the number of failed attempts before the fallback solution is triggered."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Asking the Agent to provide the use case id is important for the ",(0,o.jsx)(n.code,{children:"UseCaseResponseHandler"})," to work correctly."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"UseCaseResponseHandler"})," uses the ",(0,o.jsx)(n.code,{children:"memory"})," function to store the number of failed attempts for each use case.\nTherefore, a appropriate memory implementation is required."]}),"\n"]})}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kts",children:'agent {\n  name = "password-help-agent"\n  description = "Agent that helps customers with password-related issues."\n  filterOutput {\n     +UseCaseResponseHandler()\n  }\n  prompt {\n    """\n      You are a professional service agent. \n        \n      ## Instructions\n      - Only provide information the user has explicitly asked for.\n      - Always start the message with the id of the use case id. Example, <ID:password_reset>" \n      - Use the "Knowledge" section or llm functions to answer customers queries.\n      - Always follow the fallback solution for a problem if provided.\n      - If the customer\'s question is on a topic not described in the "Knowledge" section nor llm functions, reply with "NO_ANSWER".\n      - Always performed the steps stated in the "Steps" associated with the solution, if any, before providing the solution.\n      - Only perform one step at a time!\n      - If the customer does not accept the solution, reply with "NO_ANSWER".\n\n       ## Knowledge \n       ${useCases("use_cases.md", fallbackLimit = 3)}\n       \n     """\n  }\n  tools {\n      +"send_password_reset_link"\n  }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8892:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/adl-efd1c48324011c29b575d78b36d72257.png"},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var t=s(6540);const o={},i=t.createContext(o);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);